@tailwind base;
@tailwind components;
@tailwind utilities;

/* ================================
   BASE STYLES - OPTIMIZADOS
   ================================ */

@layer base {
  html {
    @apply scroll-smooth;
    height: 100%;
  }

  body {
    @apply bg-black text-white antialiased;
    height: 100%;
    /* ✅ Fuente optimizada con fallbacks */
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
      "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    /* ✅ Suavizado de fuentes mejorado */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* ✅ Mejora rendering de texto */
    text-rendering: optimizeLegibility;
    /* ✅ Previene zoom en iOS al hacer focus en inputs */
    -webkit-text-size-adjust: 100%;
  }

  /* ✅ Optimización de imágenes por defecto */
  img {
    @apply max-w-full h-auto;
  }

  /* ✅ Smooth scrolling para elementos con scroll */
  * {
    scrollbar-width: thin;
    scrollbar-color: rgba(139, 92, 246, 0.5) rgba(0, 0, 0, 0.3);
  }

  /* ✅ Scrollbar personalizado para Webkit */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-black;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-purple-600/50 rounded-full;
    border: 2px solid transparent;
    background-clip: padding-box;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-purple-500;
  }

  /* ✅ Links por defecto */
  a {
    @apply transition-colors duration-200;
  }

  /* ✅ Inputs y selects mejorados */
  input, select, textarea {
    @apply transition-colors duration-200;
  }

  /* ✅ Focus visible mejorado para accesibilidad */
  *:focus-visible {
    @apply outline-2 outline-offset-2 outline-purple-500;
  }
}

/* ================================
   COMPONENTS - UTILIDADES COMUNES
   ================================ */

@layer components {
  /* ✅ Container responsive mejorado */
  .container {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  /* ✅ Gradientes reutilizables */
  .gradient-purple-pink {
    @apply bg-gradient-to-r from-purple-400 via-pink-500 to-purple-600;
  }

  .gradient-text {
    @apply text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500;
  }

  /* ✅ Glassmorphism effects */
  .glass {
    @apply bg-white/5 backdrop-blur-md border border-white/10;
  }

  .glass-dark {
    @apply bg-black/50 backdrop-blur-xl border border-white/10;
  }

  /* ✅ Glow effects */
  .glow-purple {
    box-shadow: 0 0 40px rgba(139, 92, 246, 0.6);
  }

  .glow-pink {
    box-shadow: 0 0 40px rgba(236, 72, 153, 0.6);
  }

  /* ✅ Botones con animación optimizada */
  .btn-animated {
    @apply transition-all duration-150 ease-out;
    will-change: transform;
  }

  .btn-animated:active {
    @apply scale-[0.98];
    box-shadow: 0 4px 14px rgba(139, 92, 246, 0.3);
  }

  /* ✅ Hover lift effect */
  .hover-lift {
    @apply transition-transform duration-300;
    will-change: transform;
  }

  .hover-lift:hover {
    @apply -translate-y-2;
  }

  /* ✅ Shimmer effect para loading */
  .shimmer {
    background: linear-gradient(
      90deg,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.1) 50%,
      rgba(255, 255, 255, 0) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
  }

  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  /* ✅ Pulse animation optimizada */
  .pulse-slow {
    animation: pulse-slow 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  @keyframes pulse-slow {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  /* ✅ Textura de grid reutilizable */
  .grid-texture {
    background-image: 
      linear-gradient(rgba(139, 92, 246, 0.1) 1px, transparent 1px),
      linear-gradient(90deg, rgba(139, 92, 246, 0.1) 1px, transparent 1px);
    background-size: 60px 60px;
  }

  /* ✅ Noise texture para fondos */
  .noise-texture {
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='3' numOctaves='3' /%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    opacity: 0.05;
  }
}

/* ================================
   UTILITIES - HELPERS ADICIONALES
   ================================ */

@layer utilities {
  /* ✅ Text truncate helpers */
  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* ✅ Hide scrollbar pero mantener funcionalidad */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* ✅ Aspect ratios útiles */
  .aspect-product {
    aspect-ratio: 3 / 4;
  }

  .aspect-hero {
    aspect-ratio: 16 / 9;
  }

  /* ✅ Safe area para móviles con notch */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* ✅ GPU acceleration para animaciones */
  .gpu-accelerate {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }
}

/* ================================
   PERFORMANCE OPTIMIZATIONS
   ================================ */

/* ✅ Reduce motion para accesibilidad */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ✅ Print styles */
@media print {
  * {
    background: transparent !important;
    color: black !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }

  a,
  a:visited {
    text-decoration: underline;
  }

  img {
    page-break-inside: avoid;
  }

  p,
  h2,
  h3 {
    orphans: 3;
    widows: 3;
  }

  h2,
  h3 {
    page-break-after: avoid;
  }
}

/* ================================
   MOBILE OPTIMIZATIONS
   ================================ */

/* ✅ Tap highlight removal para mejor UX móvil */
@media (hover: none) {
  * {
    -webkit-tap-highlight-color: transparent;
  }
}

/* ✅ Touch optimization */
@media (pointer: coarse) {
  button, a {
    min-height: 44px;
    min-width: 44px;
  }
}
